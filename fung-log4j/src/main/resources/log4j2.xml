<?xml version="1.0" encoding="UTF-8"?>
<configuration status="OFF">
  <appenders>
    <Console name="Console" target="SYSTEM_OUT">
      <ThresholdFilter level="info" onMatch="ACCEPT" onMismatch="DENY"/>
      <PatternLayout pattern="%d{HH:mm:ss.SSS} %-5level %class{36} %L %M - %msg%xEx%n"/>
    </Console>

    <RollingFile name="RollingFile" fileName="E:/logs/skyhotel-common.log"
                 filePattern="E:/logs/$${date:yyyy-MM-dd}/skyhotel-common-%d{MM-dd-yyyy}-%i.log.gz">
      <PatternLayout pattern="%d{yyyy.MM.dd 'at' HH:mm:ss z} %-5level %class{36} %L %M - %msg%xEx%n"/>
      <SizeBasedTriggeringPolicy size="5MB"/>
    </RollingFile>

    <RollingRandomAccessFile immediateFlush="false" name="GeneralRollingFile" fileName="E:/logs/skyhotel.log"
                             filePattern="E:/logs/$${date:yyyy-MM-dd}/skyhotel-%d{MM-dd-yyyy}-%i.log.gz">
      <PatternLayout pattern="%d{yyyy-MM-dd HH:mm:ss} [%t] [%c:%L] %m%n" />
      <Policies>
        <TimeBasedTriggeringPolicy interval="1" />
      </Policies>
    </RollingRandomAccessFile>

    <RollingRandomAccessFile immediateFlush="false" name="ErrorRollingFile" fileName="../logs/skyhotel-error.log"
                             filePattern="../logs/$${date:yyyy-MM-dd}/skyhotel-error-%d{MM-dd-yyyy}-%i.log.gz">
      <PatternLayout pattern="%d{yyyy-MM-dd HH:mm:ss} [%t] [%c:%L] %m%n" />
      <Policies>
        <TimeBasedTriggeringPolicy interval="1"/>
      </Policies>
    </RollingRandomAccessFile>

  </appenders>
  <loggers>
    <root level="info">
      <appender-ref ref="Console"/>
      <appender-ref ref="RollingFile"/>
    </root>
    <AsyncLogger name="GENERAL_ROLLING_FILE_LOG" level="info" additivity="false">
      <appender-ref ref="GeneralRollingFile"/>
    </AsyncLogger>
    <AsyncLogger name="ERROR_ROLLING_FILE_LOG" level="info" additivity="false">
      <appender-ref ref="ErrorRollingFile"/>
    </AsyncLogger>
    <logger name="org.springframework" level="info" additivity="false">
      <appender-ref ref="Console"/>
      <appender-ref ref="RollingFile"/>
    </logger>
    <logger name="org.mybatis" level="info" additivity="false">
      <appender-ref ref="Console"/>
      <appender-ref ref="RollingFile"/>
    </logger>
    <logger name="org.apache.ibatis" level="info" additivity="false">
      <appender-ref ref="Console"/>
      <appender-ref ref="RollingFile"/>
    </logger>
    <logger name="org.apache.shiro" level="info" additivity="false">
      <appender-ref ref="Console"/>
      <appender-ref ref="RollingFile"/>
    </logger>
    <logger name="net.bull.javamelody" level="info" additivity="false">
      <appender-ref ref="Console"/>
      <appender-ref ref="RollingFile"/>
    </logger>
  </loggers>
</configuration>